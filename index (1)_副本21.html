<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025ä¸­å›½åŸå¸‚äººå±…åŒ¹é…åº¦æ·±åº¦æµ‹è¯„ | æ——èˆ°ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --accent: #f43f5e;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #e0e7ff 0%, #fae8ff 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text);
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: var(--card);
            border-radius: 24px;
            box-shadow: 0 20px 40px -5px rgba(0,0,0,0.1);
            padding: 32px;
            margin: 20px;
            position: relative;
            min-height: 600px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        /* é¦–é¡µ */
        .start-screen {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            flex-grow: 1;
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .tagline {
            font-size: 1.1rem;
            color: #64748b;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .btn {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 16px 48px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 10px 25px -5px rgba(99, 102, 241, 0.4);
            transition: transform 0.2s;
            display: inline-block;
        }

        .btn:active { transform: scale(0.96); }

        .donation-area {
            margin-top: auto;
            padding-top: 30px;
            border-top: 1px dashed #e2e8f0;
            text-align: center;
        }
        
        .qr-placeholder {
            width: 140px;
            height: 140px;
            background: #f1f5f9;
            margin: 10px auto;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
            border: 2px dashed #cbd5e1;
        }
        
        .qr-img {
            width: 140px;
            height: 140px;
            border-radius: 12px;
            object-fit: cover;
        }

        /* é¢˜ç›®é¡µ */
        .quiz-screen {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .header-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .progress-track {
            width: 100%;
            height: 8px;
            background: #f1f5f9;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .question-text {
            font-size: 1.35rem;
            font-weight: 700;
            margin-bottom: 30px;
            line-height: 1.5;
            color: var(--text);
        }

        .options-grid {
            display: grid;
            gap: 16px;
        }

        .option-card {
            background: #fff;
            border: 2px solid #e2e8f0;
            padding: 18px 24px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-card:hover {
            border-color: var(--primary);
            background: #eef2ff;
            transform: translateY(-2px);
        }

        /* å¹½é»˜å¼¹çª— */
        .toast {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: rgba(15, 23, 42, 0.9);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 0.95rem;
            opacity: 0;
            transition: all 0.3s;
            pointer-events: none;
            z-index: 100;
            text-align: center;
            max-width: 80%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* ç»“æœé¡µ */
        .result-screen { display: none; }

        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #e2e8f0;
            border-bottom-color: var(--primary);
            border-radius: 50%;
            animation: rotation 1s linear infinite;
            margin: 60px auto 20px;
        }

        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .report-container {
            background: #fff;
            padding: 40px; /* å¢åŠ å†…è¾¹è·æ–¹ä¾¿PDFå¯¼å‡º */
            line-height: 1.8;
            color: #334155;
            text-align: justify;
        }

        .city-badge {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-right: 5px;
            display: inline-block;
            margin-bottom: 5px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-outline:hover { background: var(--primary); color: white; }

        @media (max-width: 480px) {
            .container { padding: 20px; margin: 0; border-radius: 0; min-height: 100vh; }
            h1 { font-size: 1.8rem; }
            .question-text { font-size: 1.2rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="start-screen" class="start-screen">
        <div>
            <h1>ğŸ™ï¸ 2025 ä¸­å›½åŸå¸‚<br>äººå±…åŒ¹é…åº¦æ·±åº¦æµ‹è¯„</h1>
            <p class="tagline">åŸºäºå¤§æ•°æ®ä¸äººæ ¼å¿ƒç†å­¦çš„ 25 é“å†³ç­–é¢˜<br>åœ¨ 40 ä¸ªå€™é€‰åŸå¸‚ä¸­æ‰¾åˆ°ä½ çš„â€œå¤©å‘½ä¹‹åœ°â€</p>
            <button class="btn" onclick="game.start()">å¼€å§‹æ·±åº¦åŒ¹é…</button>
        </div>
        
        <div class="donation-area">
            <p style="font-size: 0.9rem; color: #64748b; margin-bottom: 15px;">
                å¼€å‘ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—ç»“æœç²¾å‡†æœ‰è¶£ï¼Œ<br>æ¬¢è¿è¯·æˆ‘å–æ¯å†°ç¾å¼ â˜•
            </p>
            <div class="qr-placeholder">
                <img src="YOUR_QR_CODE_HERE" alt="èµèµç " class="qr-img" onerror="this.style.display='none'; this.parentElement.innerText='[åœ¨æ­¤å¤„æ’å…¥èµèµç å›¾ç‰‡]'">
            </div>
        </div>
    </div>

    <div id="quiz-screen" class="quiz-screen">
        <div class="header-status">
            <span>å†³ç­–è¿›åº¦</span>
            <span id="q-counter">1 / 25</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        
        <div id="question-area">
            <div class="question-text" id="q-text">é¢˜ç›®åŠ è½½ä¸­...</div>
            <div class="options-grid" id="q-options"></div>
        </div>
    </div>

    <div id="result-screen" class="result-screen">
        <div id="loading-view" style="text-align: center; padding-top: 50px;">
            <div class="loader"></div>
            <h3 style="color: var(--primary);">æ­£åœ¨æ„å»ºåŸå¸‚æ¨¡å‹...</h3>
            <p style="color: #94a3b8; font-size: 0.9rem;">åˆ†ææˆ¿ä»·å‹åŠ›æŒ‡æ•°...<br>è®¡ç®—æ°”å€™èˆ’é€‚åº¦...<br>åŒ¹é…äººæ ¼æ½œæ„è¯†...</p>
        </div>

        <div id="report-view" style="display: none;">
            <div id="report-content" class="report-container">
                </div>
            
            <div class="btn-group">
                <button class="btn" onclick="location.reload()">é‡æµ‹ä¸€æ¬¡</button>
                <button class="btn-outline" onclick="game.exportPDF()">ğŸ“„ å­˜ä¸º PDF æŠ¥å‘Š</button>
            </div>
        </div>
    </div>
</div>

<div id="toast" class="toast"></div>

<script>
/**
 * æ•°æ®é…ç½®åŒº
 * åŒ…å« 40 ä¸ªåŸå¸‚çš„æ•°æ®ç»“æ„å’Œ 25 é“é¢˜ç›®
 */

// åŸå¸‚åº“ï¼šåŒ…å«ç‰¹å¾æ ‡ç­¾å’Œæè¿°
// Tags è¯´æ˜: 
// [Budget]: high_cost, mid_cost, low_cost
// [Climate]: north(dry/cold), south(humid/hot), coastal, pleasant(spring-like)
// [Career]: tech, finance, gov(stability), mfg(industry), trade, tourism
// [Vibe]: fast, slow, nightlife, culture, nature, food
const cities = [
    // ä¸€çº¿
    { name: "åŒ—äº¬", desc: "æ”¿æ²»ä¸æ–‡åŒ–çš„ç»å¯¹é«˜åœ°ï¼Œåªæœ‰è¿™é‡Œèƒ½å®‰æ”¾æœ€å¤§çš„é‡å¿ƒã€‚", tags: ["high_cost", "north", "dry", "tech", "gov", "culture", "fast", "pressure"] },
    { name: "ä¸Šæµ·", desc: "é­”éƒ½çš„å¥‘çº¦ç²¾ç¥ä¸è¾¹ç•Œæ„Ÿï¼Œé€‚åˆè¿½æ±‚ç²¾è‡´ä¸è§„åˆ™çš„ç²¾è‹±ã€‚", tags: ["high_cost", "south", "coastal", "finance", "intl", "fashion", "fast", "coffee"] },
    { name: "æ·±åœ³", desc: "æé’±ä¹‹éƒ½ï¼Œæ•ˆç‡è‡³ä¸Šï¼Œè¿™é‡Œä¸ç›¸ä¿¡çœ¼æ³ªï¼Œåªç›¸ä¿¡å˜ç°ã€‚", tags: ["high_cost", "south", "hot", "tech", "efficiency", "park", "fast", "new"] },
    { name: "å¹¿å·", desc: "åŒ…å®¹åŠ¡å®ï¼Œç©¿ç€æ‹–é‹åƒæ—©èŒ¶ï¼Œä¸€çº¿åŸå¸‚ä¸­çš„çƒŸç«æ°”å¤©èŠ±æ¿ã€‚", tags: ["high_cost", "south", "hot", "trade", "food", "inclusive", "fast", "nightlife"] },
    // æ–°ä¸€çº¿/å¼ºäºŒçº¿
    { name: "æˆéƒ½", desc: "å¤©åºœä¹‹å›½ï¼Œåœ¨å¿«ä¸æ…¢ä¹‹é—´å®Œç¾å¹³è¡¡ï¼ŒåŒ…å®¹ä¸€åˆ‡ç”Ÿæ´»æ–¹å¼ã€‚", tags: ["mid_cost", "south", "humid", "tech", "food", "slow", "inclusive", "nightlife"] },
    { name: "æ­å·", desc: "äº’è”ç½‘çš„ä¸­å¿ƒï¼Œé£æ™¯å¦‚ç”»ä½†å·¥ä½œèŠ‚å¥æå¿«ï¼Œç”µå•†äººçš„è€¶è·¯æ’’å†·ã€‚", tags: ["high_cost", "south", "humid", "tech", "ecom", "nature", "fast", "pressure"] },
    { name: "é‡åº†", desc: "èµ›åšæœ‹å…‹å±±åŸï¼Œçˆ¬å¡ä¸Šåï¼Œæ€§æ ¼ç«è¾£ï¼Œé€‚åˆä½“åŠ›å¥½çš„çƒ­è¡€é’å¹´ã€‚", tags: ["low_cost", "south", "hot", "mfg", "food", "nightlife", "mountain", "inclusive"] },
    { name: "æ­¦æ±‰", desc: "ä¹çœé€šè¡¢ï¼Œæ±Ÿæ¹–æ°”é‡ï¼Œè¿‡æ—©æ–‡åŒ–ä¸°å¯Œï¼Œå¤§å­¦ç”Ÿæ•°é‡å…¨çƒé¢†å…ˆã€‚", tags: ["mid_cost", "south", "hot", "tech", "mfg", "food", "education", "fast"] },
    { name: "è¥¿å®‰", desc: "åä¸‰æœå¤éƒ½ï¼Œå¹è¿‡çš„é£éƒ½æ˜¯æ–‡åŒ–ï¼Œç¡¬ç§‘æŠ€ä¸ç¢³æ°´ç¾é£Ÿçš„ç»“åˆã€‚", tags: ["mid_cost", "north", "dry", "tech", "culture", "history", "food_carb"] },
    { name: "è‹å·", desc: "æœ€å¼ºåœ°çº§å¸‚ï¼Œå›­æ—ä¸å·¥å‚å¹¶å­˜ï¼Œç”±äºå¤–ä¼å¤šï¼Œè¿™é‡Œä¸‹ç­å¾ˆå‡†æ—¶ã€‚", tags: ["mid_cost", "south", "humid", "mfg", "quiet", "garden", "orderly"] },
    { name: "å—äº¬", desc: "å…­æœå¤éƒ½ï¼Œåšçˆ±ä¹‹åŸï¼Œæ¢§æ¡æ ‘ä¸‹çš„ç§‘ç ”é‡é•‡ï¼Œç¨³é‡è€Œåšå®ã€‚", tags: ["mid_cost", "south", "humid", "education", "gov", "culture", "nature"] },
    { name: "é•¿æ²™", desc: "å¨±ä¹ä¹‹éƒ½ï¼Œæˆ¿ä»·æ´¼åœ°ï¼Œæ‹¿ç€ä¸€çº¿å·¥èµ„ä¸€åŠçš„é’±ï¼Œè¿‡ç€ä¸¤å€çˆ½çš„ç”Ÿæ´»ã€‚", tags: ["low_cost", "south", "hot", "media", "food", "nightlife", "happy", "spicy"] },
    { name: "å¤©æ´¥", desc: "é«˜è€ƒçº¢åˆ©ä¸ç›¸å£°ä¹‹ä¹¡ï¼Œç”Ÿæ´»èŠ‚å¥æ…¢ï¼Œé€‚åˆé¡¾å®¶å’Œè¿½æ±‚æ€§ä»·æ¯”ã€‚", tags: ["mid_cost", "north", "dry", "mfg", "gov", "slow", "humor", "education"] },
    { name: "éƒ‘å·", desc: "é“è·¯å¿ƒè„ï¼Œé¢é£Ÿå¤§çœï¼Œè¿™é‡Œçš„äººæ‹¼æåŠ¡å®ï¼Œä¸è®²è™šçš„ã€‚", tags: ["low_cost", "north", "dry", "mfg", "logistics", "struggle", "food_carb"] },
    { name: "é’å²›", desc: "çº¢ç“¦ç»¿æ ‘ï¼Œç¢§æµ·è“å¤©ï¼Œå–ç€å•¤é…’åƒè›¤èœŠï¼Œä½“åˆ¶å†…æ°›å›´æµ“åšã€‚", tags: ["mid_cost", "north", "coastal", "mfg", "gov", "nature", "beer"] },
    { name: "æ²ˆé˜³", desc: "å…±å’Œå›½é•¿å­ï¼Œç‰©ä»·æ„Ÿäººï¼Œæ´—æµ´æ–‡åŒ–å®‡å®™ä¸­å¿ƒï¼Œå¹½é»˜æ˜¯ç”Ÿæ´»å¿…éœ€å“ã€‚", tags: ["low_cost", "north", "cold", "mfg", "humor", "bath", "slow"] },
    { name: "å®æ³¢", desc: "ä½è°ƒå¯Œè£•ï¼Œè—å¯Œäºæ°‘ï¼Œæ¸¯å£è´¸æ˜“å‘è¾¾ï¼Œé€‚åˆé—·å£°å‘å¤§è´¢ã€‚", tags: ["mid_cost", "south", "coastal", "trade", "mfg", "quiet", "business"] },
    { name: "ä¸œè", desc: "ä¸–ç•Œå·¥å‚ï¼Œæ¾å±±æ¹–ç•”ï¼Œé€‚åˆåˆ¶é€ ä¸šäººæ‰ï¼Œå°±åœ¨æ·±åœ³éš”å£ã€‚", tags: ["mid_cost", "south", "hot", "mfg", "tech", "pragmatic"] },
    { name: "ä½›å±±", desc: "åŠŸå¤«ä¹‹åŸï¼Œç¾é£Ÿéåœ°ï¼Œå®ä¸šå‘è¾¾ï¼Œç”Ÿæ´»æå…¶åŠ¡å®å®‰é€¸ã€‚", tags: ["low_cost", "south", "hot", "mfg", "food", "slow", "pragmatic"] },
    { name: "åˆè‚¥", desc: "é£æŠ•ä¹‹åŸï¼ŒèµŒå¯¹äº†æ–°èƒ½æºå’Œæ˜¾ç¤ºå±ï¼Œæ­£åœ¨é£é€Ÿä¸Šå‡çš„é»‘é©¬ã€‚", tags: ["mid_cost", "south", "humid", "tech", "mfg", "fast_growth"] },
    // ç‰¹è‰²/å®œå±…/æ½œåŠ›
    { name: "æ˜†æ˜", desc: "æ˜¥åŸï¼Œå››å­£å¦‚æ˜¥ï¼Œé²œèŠ±è®ºæ–¤å–ï¼ŒèŠ‚å¥ææ…¢ï¼Œé€‚åˆå…»è€å’Œèººå¹³ã€‚", tags: ["low_cost", "pleasant", "tourism", "slow", "nature", "flower"] },
    { name: "å¤§è¿", desc: "åŒ—æ–¹æ˜ç ï¼Œå¹¿åœºä¹‹åŸï¼Œæ—¢æœ‰ä¸œåŒ—çš„è±ªçˆ½ä¹Ÿæœ‰æµ·æ»¨çš„æµªæ¼«ã€‚", tags: ["mid_cost", "north", "coastal", "tech", "gov", "nature", "clean"] },
    { name: "å¦é—¨", desc: "æµ·ä¸ŠèŠ±å›­ï¼Œå°è€Œç¾ï¼Œæ–‡è‰ºé’å¹´çš„åœ£åœ°ï¼Œå°±æ˜¯æˆ¿ä»·æœ‰ç‚¹è´µã€‚", tags: ["high_cost", "south", "coastal", "tourism", "slow", "coffee", "art"] },
    { name: "æµå—", desc: "æ³‰åŸï¼Œè€èˆç¬”ä¸‹çš„æ¸©æ¶¦ä¹‹åœ°ï¼Œå±±ä¸œè€ƒå…¬çš„å¤§æœ¬è¥ï¼Œæåº¦ç¨³å®šã€‚", tags: ["low_cost", "north", "dry", "gov", "stability", "slow"] },
    { name: "ç¦å·", desc: "æœ‰ç¦ä¹‹å·ï¼Œä½è°ƒçš„çœä¼šï¼Œç©ºæ°”è´¨é‡æä½³ï¼Œå®—æ—æ–‡åŒ–æµ“åšã€‚", tags: ["mid_cost", "south", "coastal", "gov", "tea", "slow", "tradition"] },
    { name: "å“ˆå°”æ»¨", desc: "ä¸œæ–¹å°å·´é»ï¼Œå†°é›ªå¥‡ç¼˜ï¼Œä¿„å¼é£æƒ…ï¼Œè™½ç„¶å†·ä½†å®¤å†…æ¸©æš–å¦‚æ˜¥ã€‚", tags: ["low_cost", "north", "cold", "tourism", "beauty", "ice"] },
    { name: "é•¿æ˜¥", desc: "æ±½è½¦åŸï¼Œç”µå½±åŸï¼Œå®½é˜”çš„è¡—é“å’Œæ‰å®çš„å·¥ä¸šåŸºç¡€ã€‚", tags: ["low_cost", "north", "cold", "mfg", "cars", "stable"] },
    { name: "ç æµ·", desc: "ç™¾å²›ä¹‹å¸‚ï¼Œæƒ…ä¾£è·¯æ¼«æ­¥ï¼Œå…»è€åº¦å‡é¦–é€‰ï¼Œç©ºæ°”å¸¸å¹´ä¼˜è‰¯ã€‚", tags: ["mid_cost", "south", "coastal", "tourism", "slow", "pension", "clean"] },
    { name: "è´µé˜³", desc: "é¿æš‘ä¹‹éƒ½ï¼Œå¤§æ•°æ®ä¸­å¿ƒï¼Œç¾é£Ÿé…¸è¾£å¼€èƒƒï¼Œæ¥¼ç›˜è¶…çº§å¤§ã€‚", tags: ["low_cost", "pleasant", "big_data", "food", "spicy", "nature"] },
    { name: "å—å®", desc: "ç»¿åŸï¼Œç”µåŠ¨è½¦ä¹‹éƒ½ï¼Œæ°´æœè‡ªç”±ï¼Œç”Ÿæ´»èŠ‚å¥éå¸¸æ‚ é—²ã€‚", tags: ["low_cost", "south", "hot", "slow", "fruit", "green"] },
    { name: "æ— é”¡", desc: "å¤ªæ¹–æ˜ç ï¼Œç”œé£Ÿä¹‹éƒ½ï¼Œäººå‡GDPæé«˜ï¼Œå¯Œåº¶ä¸”æ¸©å©‰ã€‚", tags: ["mid_cost", "south", "humid", "mfg", "rich", "sweet"] },
    { name: "æµ·å£", desc: "æ¤°é£æµ·éŸµï¼Œå¤©ç„¶æ°§å§ï¼Œå…ç¨è´­ç‰©ï¼Œé™¤äº†å¤å¤©çƒ­ç‚¹æ²¡æ¯›ç—…ã€‚", tags: ["mid_cost", "south", "hot", "coastal", "slow", "clean"] },
    { name: "å…°å·", desc: "é»„æ²³ç©¿åŸè€Œè¿‡ï¼Œä¸€ç¢—é¢ä¸€åº§åŸï¼Œè¥¿åŒ—çš„äº¤é€šæ¢çº½ã€‚", tags: ["low_cost", "north", "dry", "food_carb", "river"] },
    { name: "ä¹Œé²æœ¨é½", desc: "ç¦»æµ·æ´‹æœ€è¿œçš„åŸå¸‚ï¼Œå¼‚åŸŸé£æƒ…ï¼Œç“œæœé£˜é¦™ï¼Œç¡¬æ ¸è¾¹ç–†ã€‚", tags: ["low_cost", "north", "dry", "culture", "fruit", "security"] },
    { name: "å¤§ç†", desc: "é£èŠ±é›ªæœˆï¼Œæ•°å­—æ¸¸æ°‘å¤§æœ¬è¥ï¼Œè‹å±±æ´±æµ·æ²»æ„ˆä¸€åˆ‡ã€‚", tags: ["low_cost", "pleasant", "nomad", "art", "freedom", "nature"] },
    { name: "å¨æµ·", desc: "æœ€å¹²å‡€çš„åŸå¸‚ï¼Œä¸‰é¢ç¯æµ·ï¼Œé€‚åˆå‘å‘†çœ‹æµ·ï¼ŒéŸ©å›½å•†å“å¤šã€‚", tags: ["low_cost", "north", "coastal", "clean", "slow", "retirement"] },
    { name: "æ³‰å·", desc: "åŠåŸçƒŸç«åŠåŸä»™ï¼Œä¸–ç•Œå®—æ•™åšç‰©é¦†ï¼Œçˆ±æ‹¼æ‰ä¼šèµ¢ã€‚", tags: ["low_cost", "south", "coastal", "trade", "history", "gods"] },
    { name: "ä¸‰äºš", desc: "ä¸œæ–¹å¤å¨å¤·ï¼Œé™¤äº†è´µå…¨æ˜¯ä¼˜ç‚¹ï¼Œå…¨ä¸­å›½å¯Œäººçš„åèŠ±å›­ã€‚", tags: ["high_cost", "south", "hot", "coastal", "tourism", "luxury"] },
    { name: "çŸ³å®¶åº„", desc: "æ‘‡æ»šä¹‹åŸï¼Œå¤©ä¸‹ç¬¬ä¸€åº„ï¼Œæœ´å®æ— åï¼Œäº¤é€šä¾¿åˆ©ã€‚", tags: ["low_cost", "north", "dry", "mfg", "rock", "pragmatic"] },
    { name: "æ‹‰è¨", desc: "æ—¥å…‰åŸï¼Œä¿¡ä»°ä¹‹åœ°ï¼Œç¼ºæ°§ä½†ä¸ç¼ºä¿¡ä»°ï¼Œé€‚åˆå‡€åŒ–å¿ƒçµã€‚", tags: ["mid_cost", "pleasant", "religion", "slow", "sun"] }
];

// é¢˜ç›®åº“ (25é¢˜)
const questions = [
    // --- ç»æµä¸ç¡¬çº¦æŸ (1-5) ---
    {
        text: "Q1. [çµé­‚æ‹·é—®] å‡è®¾è¦ä¹°ä¸€å¥—90å¹³ç±³çš„å©šæˆ¿ï¼Œä½ å’Œå®¶åº­èƒ½æ‰¿å—çš„æ€»ä»·æé™æ˜¯ï¼Ÿ",
        options: [
            { text: "800ä¸‡ä»¥ä¸Š (æˆ‘æ˜¯å¯ŒäºŒä»£/é«˜è–ªç²¾è‹±)", scores: { high_cost: 10, luxury: 5 }, humor: "Væˆ‘50ï¼Œçœ‹çœ‹å®åŠ›ã€‚" },
            { text: "400-800ä¸‡ (åŠªåŠ›çš„ä¸­äº§)", scores: { high_cost: 5, mid_cost: 5 }, humor: "å¾ˆç¨³ï¼Œæ–°ä¸€çº¿éšä¾¿æŒ‘ï¼Œä¸€çº¿å¤Ÿä¸ªé¦–ä»˜ã€‚" },
            { text: "200-400ä¸‡ (ç²¾æ‰“ç»†ç®—)", scores: { mid_cost: 10, low_cost: 2 }, humor: "è¿™ä¸ªé¢„ç®—åœ¨äºŒçº¿åŸå¸‚èƒ½è¿‡å¾—å¾ˆæ»‹æ¶¦ã€‚" },
            { text: "150ä¸‡ä»¥å†… (åˆšéœ€ä¸Šè½¦)", scores: { low_cost: 10, mid_cost: -5 }, humor: "é•¿æ²™å’Œæ²ˆé˜³çš„å¤§å¹³å±‚åœ¨å‘ä½ æ‹›æ‰‹ï¼" },
            { text: "ä¸ä¹°æˆ¿ï¼Œç§Ÿæˆ¿ä¸€è¾ˆå­ï¼", scores: { nomad: 10, freedom: 8 }, humor: "é€šé€ï¼åªè¦ä¸ä¹°æˆ¿ï¼Œå“ªé‡Œéƒ½æ˜¯å®¶ã€‚" }
        ]
    },
    {
        text: "Q2. [æ°”å€™ä½“è´¨] å†¬å¤©åˆ°äº†ï¼Œä½ å¸Œæœ›çª—å¤–æ˜¯ï¼Ÿ",
        options: [
            { text: "å¤§é›ªçº·é£ï¼Œå±‹é‡Œæœ‰æš–æ°”ç©¿çŸ­è¢–", scores: { north: 10, cold: 5, ice: 5 }, humor: "åŒ—æ–¹æš–æ°”æ˜¯äººç±»ä¹‹å…‰ï¼Œå—æ–¹äººä¸æ‡‚ã€‚" },
            { text: "ç»¿æ ‘æˆè«ï¼Œåªéœ€ç©¿ä»¶è–„å¤–å¥—", scores: { south: 5, pleasant: 10, hot: -5 }, humor: "é‚£å°±æ˜¯æ˜†æ˜æˆ–æµ·å—äº†ï¼Œèº²é¿å¯’å†¬ã€‚" },
            { text: "æ¹¿æ¶¦é˜´å†·ï¼Œä½†æˆ‘æœ‰ç©ºè°ƒ/é­”æ³•æ”»å‡»æŠ—æ€§", scores: { south: 5, humid: 5 }, humor: "æ±Ÿæµ™æ²ªåŒ…é‚®åŒºçš„å†¬å¤©ï¼Œæ‡‚çš„éƒ½æ‡‚ã€‚" },
            { text: "æ— æ‰€è°“ï¼Œæˆ‘èº«ä½“å¥½", scores: { pragamatic: 5 }, humor: "ç‰¹ç§å…µä½“è´¨ã€‚" }
        ]
    },
    {
        text: "Q3. [ç”Ÿç†æ­»ç©´] ç»å¯¹ä¸èƒ½å¿å—å“ªç§ç¯å¢ƒï¼Ÿï¼ˆä¸€ç¥¨å¦å†³æƒï¼‰",
        options: [
            { text: "å—ä¸äº†å¹²ç‡¥ï¼Œæµé¼»è¡€", scores: { humid: 10, north: -10, dry: -10 }, humor: "é‚£ä½ åˆ«å»åŒ—äº¬è¥¿åŒ—ï¼Œé¢è†œéƒ½æ•‘ä¸äº†ã€‚" },
            { text: "å—ä¸äº†æ½®æ¹¿ï¼Œè¡£æœæ™¾ä¸å¹²", scores: { dry: 10, south: -5, humid: -10 }, humor: "å›å—å¤©æ˜¯ä½ çš„å™©æ¢¦ï¼Œå¾€åŒ—èµ°ã€‚" },
            { text: "å—ä¸äº†é…·çƒ­ï¼ˆæŒç»­35åº¦+ï¼‰", scores: { pleasant: 10, cold: 5, hot: -10 }, humor: "ç«ç‚‰åŸå¸‚ï¼ˆé‡åº†/æ­¦æ±‰/æ­å·ï¼‰å·²æŠŠä½ æ‹‰é»‘ã€‚" },
            { text: "å—ä¸äº†æ²¡æœ‰æµ·", scores: { coastal: 10 }, humor: "å†…é™†åŸå¸‚ç›´æ¥Passã€‚" }
        ]
    },
    {
        text: "Q4. [èŒä¸šèµ›é“] ä½ ç›®å‰çš„è°‹ç”Ÿæ‰‹æ®µæ›´æ¥è¿‘ï¼Ÿ",
        options: [
            { text: "äº’è”ç½‘/AI/ç¨‹åºå‘˜", scores: { tech: 10, fast: 5 }, humor: "å‘é™…çº¿è¿˜å¥½å—ï¼Ÿå»æ·±åœ³/æ­å·/åŒ—äº¬å§ã€‚" },
            { text: "é‡‘è/å’¨è¯¢/é«˜ç«¯æœåŠ¡", scores: { finance: 10, intl: 8 }, humor: "é™†å®¶å˜´æˆ–ç¦ç”°CBDéœ€è¦ä½ çš„PPTã€‚" },
            { text: "è€ƒå…¬/ä½“åˆ¶å†…/æ•™å¸ˆ", scores: { gov: 10, stability: 10 }, humor: "å®‡å®™çš„å°½å¤´æ˜¯ç¼–åˆ¶ï¼Œå±±ä¸œ/åŒ—äº¬/çœä¼šæ¬¢è¿ä½ ã€‚" },
            { text: "åˆ¶é€ ä¸š/å·¥ç¨‹å¸ˆ", scores: { mfg: 10, pragmatic: 5 }, humor: "å®ä¸šå…´é‚¦ï¼Œè‹å·/ä½›å±±/åˆè‚¥æ˜¯å¤§èˆå°ã€‚" },
            { text: "è‡ªç”±èŒä¸š/ç”µå•†/ç›´æ’­", scores: { nomad: 8, ecom: 10, media: 8 }, humor: "å“ªé‡Œç½‘é€Ÿå¿«ã€æˆ¿ç§Ÿä½å°±å»å“ªã€‚" }
        ]
    },
    {
        text: "Q5. [é€šå‹¤æé™] æ¯å¤©ä¸Šç­å•ç¨‹å¤šä¹…ä½ èƒ½å¿ï¼Ÿ",
        options: [
            { text: "30åˆ†é’Ÿä»¥å†…ï¼Œè¶Šè¿‘è¶Šå¥½", scores: { small: 5, slow: 5, fast: -5 }, humor: "é‚£ä½ åªèƒ½é€‰ä¸­å°åŸå¸‚æˆ–ä½å…¬å¸æ¥¼ä¸‹ã€‚" },
            { text: "1å°æ—¶å·¦å³ï¼Œæ­£å¸¸", scores: { mid_cost: 5, fast: 2 }, humor: "æ ‡å‡†æ‰“å·¥äººèŠ‚å¥ã€‚" },
            { text: "1.5å°æ—¶ä»¥ä¸Šï¼Œä¹ æƒ¯äº†", scores: { high_cost: 5, pressure: 5 }, humor: "åŒ—äº¬ç‡•éƒŠäººæ°‘å‘æ¥è´ºç”µï¼Œæ˜¯ä¸ªç‹ äººã€‚" }
        ]
    },
    
    // --- é¥®é£Ÿä¸ç”Ÿæ´» (6-10) ---
    {
        text: "Q6. [å‘³è•¾åå¥½] åƒé¥­è¿™äº‹å„¿ï¼Œä½ çš„åº•çº¿æ˜¯ï¼Ÿ",
        options: [
            { text: "æ— è¾£ä¸æ¬¢ï¼Œè¶Šè¾£è¶Šçˆ½", scores: { spicy: 10, food: 5 }, humor: "ä½ çš„èƒƒæ˜¯é“æ‰“çš„ï¼Œæ¹–å—å››å·æ¬¢è¿è…ä¸´æŒ‡å¯¼ã€‚" },
            { text: "æ¸…æ·¡ç²¾è‡´ï¼Œæ³¨é‡æœ¬å‘³/ç”œå£", scores: { sweet: 8, light: 5, south: 2 }, humor: "è‹é”¡å¸¸æˆ–å¹¿ä¸œé€‚åˆä½ ã€‚" },
            { text: "é¢é£Ÿè„‘è¢‹ï¼Œç¢³æ°´ç‚¸å¼¹", scores: { food_carb: 10, north: 5 }, humor: "ä¸‰å¤©ä¸åƒé¢å¿ƒé‡Œå‘æ…Œï¼Ÿå»è¥¿å®‰æˆ–å±±è¥¿ã€‚" },
            { text: "å•¥éƒ½åƒï¼Œåªè¦å¥½åƒå°±è¡Œ", scores: { food: 5 }, humor: "å¥½å…»æ´»ï¼" }
        ]
    },
    {
        text: "Q7. [å¤œé—´æ¨¡å¼] æ™šä¸Š10ç‚¹ï¼Œä½ å¸Œæœ›åŸå¸‚æ˜¯ä»€ä¹ˆæ ·ï¼Ÿ",
        options: [
            { text: "ç¯ç«é€šæ˜ï¼Œå¤œå®µæ‘Šåˆšå‡ºæ‘Š", scores: { nightlife: 10, sleep_late: 5 }, humor: "é•¿æ²™/å¹¿å·/æˆéƒ½ï¼šæˆ‘ä»¬çš„ç”Ÿæ´»æ‰åˆšå¼€å§‹ã€‚" },
            { text: "å®‰é™ï¼Œåº—é“ºå…³é—¨ï¼Œé€‚åˆç¡è§‰", scores: { quiet: 10, sleep_early: 5 }, humor: "è‹å·/åŒ—æ–¹åŸå¸‚ï¼šæ—©ç¡æ—©èµ·èº«ä½“å¥½ã€‚" },
            { text: "æœ‰24å°æ—¶ä¾¿åˆ©åº—å’Œé…’å§å³å¯", scores: { fast: 3, city: 3 }, humor: "æ ‡å‡†åŸå¸‚é…ç½®ã€‚" }
        ]
    },
    {
        text: "Q8. [å‘¨æœ«æ¶ˆé£] éš¾å¾—åŒä¼‘ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ",
        options: [
            { text: "çœ‹å±•ã€è¯å‰§ã€é€›ä¹°æ‰‹åº—", scores: { fashion: 8, culture: 5, art: 8 }, humor: "æ–‡è‰ºé’å¹´ï¼Œå¾—å»æœ‰æ–‡åŒ–æ²‰æ·€çš„å¤§åŸå¸‚ã€‚" },
            { text: "çˆ¬å±±ã€éœ²è¥ã€å»å…¬å›­å‘å‘†", scores: { nature: 10, park: 5 }, humor: "ä½ éœ€è¦ä¸€ä¸ªå«ç»¿é‡é«˜çš„åŸå¸‚ã€‚" },
            { text: "å®…åœ¨å®¶é‡Œæ‰“æ¸¸æˆ/è¿½å‰§", scores: { home: 5 }, humor: "é‚£ç½‘é€Ÿå¿«å°±è¡Œï¼ŒåŸå¸‚ä¸é‡è¦ã€‚" },
            { text: "çº¦æœ‹å‹æ´—æ¾¡/æ‰“ç‰Œ/æ“éº»", scores: { bath: 10, leisure: 8 }, humor: "æ²ˆé˜³æˆ–æˆéƒ½é€‚åˆä½ çš„çµé­‚ã€‚" }
        ]
    },
    {
        text: "Q9. [ä¾¿åˆ©åº¦] ç¦»å®¶500ç±³å†…å¿…é¡»è¦æœ‰ï¼Ÿ",
        options: [
            { text: "å¤§å•†åœºå’Œåœ°é“å£", scores: { fast: 5, modern: 5 }, humor: "ç°ä»£éƒ½å¸‚ä¾èµ–ç—‡ã€‚" },
            { text: "èœå¸‚åœºå’Œè‹è‡é¦†å­", scores: { food: 5, slow: 3 }, humor: "äººé—´çƒŸç«æ°”ï¼Œæœ€æŠšå‡¡äººå¿ƒã€‚" },
            { text: "å…¬å›­æˆ–æµ·è¾¹", scores: { nature: 5, coastal: 5 }, humor: "æ³¨é‡ç”Ÿæ´»å“è´¨ã€‚" }
        ]
    },
    {
        text: "Q10. [å’–å•¡æŒ‡æ•°] å’–å•¡å¯¹ä½ æ¥è¯´æ˜¯ï¼Ÿ",
        options: [
            { text: "ç»­å‘½æ°´ï¼Œä¸€å¤©ä¸‰æ¯å†°ç¾å¼", scores: { coffee: 10, fast: 5, work: 5 }, humor: "ä¸Šæµ·äººçš„è¡€æ¶²é‡Œæµçš„éƒ½æ˜¯æµ“ç¼©å’–å•¡ã€‚" },
            { text: "å¶å°”å–å–ï¼Œç¤¾äº¤é“å…·", scores: { leisure: 3 }, humor: "æ­£å¸¸éœ€æ±‚ã€‚" },
            { text: "ä¸å–ï¼Œæˆ‘å–èŒ¶/ç™½å¼€æ°´", scores: { tea: 8, tradition: 5 }, humor: "ç¦å»º/å¹¿ä¸œè€æ¿ç»™æ‚¨é€’äº†ä¸€æ¯åŠŸå¤«èŒ¶ã€‚" }
        ]
    },

    // --- æ€§æ ¼ä¸ç¤¾äº¤ (11-15) ---
    {
        text: "Q11. [MBTI] ä½ çš„ç¤¾äº¤èƒ½é‡æ¥æºæ˜¯ï¼Ÿ",
        options: [
            { text: "Eäººï¼šå–œæ¬¢çƒ­é—¹ï¼Œæ€•å­¤ç‹¬", scores: { nightlife: 5, inclusive: 5, active: 5 }, humor: "å»äººå¤šçƒ­é—¹çš„åœ°æ–¹å—¨ï¼" },
            { text: "Iäººï¼šç¤¾æï¼Œå–œæ¬¢ç‹¬å¤„", scores: { quiet: 8, distance: 5, slow: 3 }, humor: "ä¸Šæµ·/è‹å·è¿™ç§æœ‰è¾¹ç•Œæ„Ÿçš„åŸå¸‚é€‚åˆä½ ã€‚" },
            { text: "é—´æ­‡æ€§å‘ç–¯", scores: { rock: 5, freedom: 5 }, humor: "çŸ³å®¶åº„äº†è§£ä¸€ä¸‹ï¼Ÿ" }
        ]
    },
    {
        text: "Q12. [é™Œç”Ÿäºº] è·¯ä¸Šæœ‰äººè·Ÿä½ æ­è®ªï¼Œä½ å¸Œæœ›ï¼Ÿ",
        options: [
            { text: "çƒ­æƒ…å›åº”ï¼Œç”šè‡³èƒ½èŠåŠå°æ—¶", scores: { inclusive: 8, humor: 8, north: 3 }, humor: "å¤©æ´¥ä¼¯ä¼¯ï¼šä»‹ä¼¼å˜›è¯ï¼" },
            { text: "ç¤¼è²Œæ‹’ç»ï¼Œä¿æŒè·ç¦»", scores: { fast: 5, intl: 5 }, humor: "å¤§åŸå¸‚çš„æ ‡å‡†å†·æ¼ ï¼ˆè¤’ä¹‰ï¼‰ã€‚" },
            { text: "çœ‹é¢œå€¼å†³å®š", scores: { fashion: 3 }, humor: "é¢œç‹—ä½ å¥½ã€‚" }
        ]
    },
    {
        text: "Q13. [é¢å­å·¥ç¨‹] æ€ä¹ˆçœ‹å¾…â€œé…’æ¡Œæ–‡åŒ–â€å’Œâ€œæ’èµ„è®ºè¾ˆâ€ï¼Ÿ",
        options: [
            { text: "æåº¦åŒæ¶ï¼Œæˆ‘æ˜¯æ¥å·¥ä½œçš„", scores: { efficiency: 10, tech: 5, south: 5 }, humor: "å—æ–¹æé’±åŸå¸‚æ¬¢è¿ä½ ï¼Œè¿™é‡Œä¸å…´è¿™ä¸ªã€‚" },
            { text: "å¦‚é±¼å¾—æ°´ï¼Œè¿™æ˜¯åŠäº‹è§„çŸ©", scores: { gov: 8, north: 5, tradition: 5 }, humor: "æƒ…å•†é«˜ï¼ä½ åœ¨åŒ—æ–¹æ··å¾—å¼€ã€‚" },
            { text: "æ— æ‰€è°“ï¼Œèƒ½å¿", scores: { pragmatic: 3 }, humor: "é€‚åº”åŠ›å¼ºã€‚" }
        ]
    },
    {
        text: "Q14. [é‚»é‡Œå…³ç³»] ä½ å¸Œæœ›é‚»å±…æ˜¯ï¼Ÿ",
        options: [
            { text: "è€å¤–ã€æµ·å½’ã€ç²¾è‹±", scores: { intl: 10, high_cost: 5 }, humor: "å›½é™…åŒ–ç¤¾åŒºã€‚" },
            { text: "æœ¬åœ°å¤§çˆ·å¤§å¦ˆï¼Œçƒ­å¿ƒè‚ ", scores: { history: 5, slow: 5 }, humor: "æœ‰äº‹çœŸèƒ½å¸®ä¸Šå¿™ï¼Œå°±æ˜¯æœ‰ç‚¹åµã€‚" },
            { text: "äº’ä¸æ‰“æ‰°ï¼Œæœ€å¥½ä¸çŸ¥é“å¯¹æ–¹å­˜åœ¨", scores: { privacy: 10, apt: 5 }, humor: "ç°ä»£å…¬å¯“æ¥¼é€‚åˆä½ ã€‚" }
        ]
    },
    {
        text: "Q15. [æ–¹è¨€éšœç¢] ä½ æ„¿æ„å­¦éš¾æ‡‚çš„æ–¹è¨€å—ï¼ˆå¦‚ç²¤è¯­/é—½å—è¯­ï¼‰ï¼Ÿ",
        options: [
            { text: "ä¸æ„¿æ„ï¼Œè¯·è®²æ™®é€šè¯", scores: { mandarin: 10, new: 5 }, humor: "æ·±åœ³/åŒ—äº¬/å“ˆå°”æ»¨ï¼šæ­¤æ—¶ä¸€ä½é“ä»”è·¯è¿‡ã€‚" },
            { text: "æ„¿æ„ï¼Œè§‰å¾—å¾ˆæœ‰è¶£", scores: { culture: 5, inclusive: 5 }, humor: "å…¥ä¹¡éšä¿—ï¼Œè¯­è¨€ä¹Ÿæ˜¯æ–‡åŒ–ã€‚" },
            { text: "æ— æ‰€è°“ï¼Œåæ­£æˆ‘ä¹Ÿå¬ä¸æ‡‚", scores: { nomad: 2 }, humor: "å¿ƒæ€å¥½ã€‚" }
        ]
    },

    // --- ä»·å€¼è§‚ä¸æœªæ¥ (16-20) ---
    {
        text: "Q16. [æˆåŠŸå®šä¹‰] ä½ çœ¼ä¸­çš„â€œæˆåŠŸâ€æ˜¯ï¼Ÿ",
        options: [
            { text: "ä¸Šå¸‚ã€è´¢åŠ¡è‡ªç”±ã€æ”¹å˜ä¸–ç•Œ", scores: { ambition: 10, fast: 5, tech: 5 }, humor: "æœ‰å¿—æ°”ï¼å»ä¸€çº¿åŸå¸‚å·å‡ºæœªæ¥ã€‚" },
            { text: "è€å©†å­©å­çƒ­ç‚•å¤´ï¼Œæœ‰æˆ¿æœ‰è½¦", scores: { family: 10, mid_cost: 5 }, humor: "å¹¸ç¦æ„Ÿæœ€é«˜çš„é€‰æ‹©ï¼ŒäºŒçº¿åŸå¸‚èµ°èµ·ã€‚" },
            { text: "æ¯å¤©ç¡åˆ°è‡ªç„¶é†’ï¼Œçœ‹æµ·æ™’å¤ªé˜³", scores: { slow: 10, nature: 5, tourism: 5 }, humor: "å¤§ç†/ç æµ·/æµ·å£æ˜¯ä½ çš„å½’å®¿ã€‚" },
            { text: "ç«¯ç€é“é¥­ç¢—ï¼Œæ—±æ¶ä¿æ”¶", scores: { stability: 10, gov: 10 }, humor: "ç¨³å­—å½“å¤´ã€‚" }
        ]
    },
    {
        text: "Q17. [æ•™è‚²ç„¦è™‘] å¯¹ä¸‹ä¸€ä»£æ•™è‚²çš„çœ‹æ³•ï¼Ÿ",
        options: [
            { text: "ä¸€å®šè¦æœ€å¥½ï¼Œè¿˜è¦æœ‰æˆ·å£ä¼˜åŠ¿", scores: { education: 10, high_cost: 5 }, humor: "åŒ—äº¬/å¤©æ´¥/ä¸Šæµ·ï¼šå‡†å¤‡å¥½å­¦åŒºæˆ¿çš„é’±äº†å—ï¼Ÿ" },
            { text: "å·®ä¸å¤šå°±è¡Œï¼Œå¿«ä¹æ•™è‚²", scores: { happy: 5, slow: 5 }, humor: "æ”¾è¿‡å­©å­ï¼Œä¹Ÿæ”¾è¿‡è‡ªå·±ã€‚" },
            { text: "ä¸å©šä¸è‚²ä¿å¹³å®‰", scores: { freedom: 10, dink: 5 }, humor: "æ½‡æ´’ï¼æƒ³å»å“ªå»å“ªã€‚" }
        ]
    },
    {
        text: "Q18. [å®¡ç¾å–å‘] å“ªç§åŸå¸‚é£è²Œæœ€è®©ä½ å¿ƒåŠ¨ï¼Ÿ",
        options: [
            { text: "æ‘©å¤©å¤§æ¥¼ç»„æˆçš„é’¢é“æ£®æ—", scores: { modern: 10, fast: 5 }, humor: "é™†å®¶å˜´æˆ–ç æ±Ÿæ–°åŸçš„æ‹¥è¶¸ã€‚" },
            { text: "çº¢å¢™é»„ç“¦ï¼Œå¤è¿¹éåœ°", scores: { history: 10, culture: 8 }, humor: "åŒ—äº¬/è¥¿å®‰/å—äº¬/æ´›é˜³ã€‚" },
            { text: "å°æ¡¥æµæ°´ï¼Œé’ç –é»›ç“¦", scores: { garden: 10, quiet: 5 }, humor: "æ±Ÿå—æ°´ä¹¡åœ¨ç­‰ä½ ã€‚" },
            { text: "æ¬§å¼å»ºç­‘ï¼Œå¼‚åŸŸé£æƒ…", scores: { exotic: 10 }, humor: "å¤©æ´¥/é’å²›/å“ˆå°”æ»¨ã€‚" }
        ]
    },
    {
        text: "Q19. [äº¤é€šå·¥å…·] ä½ æ›´å–œæ¬¢æ€ä¹ˆå‡ºè¡Œï¼Ÿ",
        options: [
            { text: "éª‘å°ç”µé©´ï¼ˆç”µåŠ¨è½¦ï¼‰", scores: { ebike: 10, slow: 2 }, humor: "å—å®/æµ·å£/éƒ‘å·ï¼šç”µé©´ä¹‹ç‹ï¼æ³¨æ„æ·±åœ³ç¦æ‘©å“¦ã€‚" },
            { text: "åœ°é“ï¼Œä¸å µè½¦æœ€é‡è¦", scores: { metro: 10, big: 5 }, humor: "è¿˜å¾—æ˜¯å¤§åŸå¸‚åœ°é“ç½‘å‘è¾¾ã€‚" },
            { text: "å¼€è½¦ï¼Œå¾—å¥½åœè½¦", scores: { car: 5, big: -5 }, humor: "ä¸€çº¿åŸå¸‚åœè½¦è´¹èƒ½è®©ä½ å“­ã€‚" }
        ]
    },
    {
        text: "Q20. [åŒ…å®¹åº¦] ä½ å¯¹LGBTQ+æˆ–äºšæ–‡åŒ–çš„æ€åº¦ï¼Ÿ",
        options: [
            { text: "å¸Œæœ›èƒ½åŒ…å®¹ï¼Œæ°›å›´è‡ªç”±", scores: { inclusive: 10, diversity: 5 }, humor: "æˆéƒ½/ä¸Šæµ·ï¼šCome as you are." },
            { text: "ä¸å…³å¿ƒï¼Œåˆ«å½±å“æˆ‘å°±è¡Œ", scores: { conservative: 2 }, humor: "å¤§éƒ¨åˆ†åŸå¸‚éƒ½OKã€‚" }
        ]
    },

    // --- ç»ˆææŠ‰æ‹© (21-25) ---
    {
        text: "Q21. [æ¶ˆè´¹è§‚] æœˆè–ª1ä¸‡ï¼Œä½ ä¼šæ€ä¹ˆèŠ±ï¼Ÿ",
        options: [
            { text: "å­˜5000ä¹°æˆ¿", scores: { saving: 10, pragmatic: 5 }, humor: "å‹¤ä¿­æŒå®¶ã€‚" },
            { text: "æœˆå…‰ï¼Œåƒå–ç©ä¹", scores: { consume: 10, happy: 5 }, humor: "ä¿ƒè¿›å†…éœ€å°±é ä½ äº†ã€‚" },
            { text: "èŠ±1ä¸‡2ï¼Œä¿¡ç”¨å¡å€’ç€åˆ·", scores: { fashion: 5, risky: 5 }, humor: "å¹´è½»å°±æ˜¯èµ„æœ¬ï¼ˆæ³¨æ„å¾ä¿¡ï¼‰ã€‚" }
        ]
    },
    {
        text: "Q22. [å½’å±æ„Ÿ] è®©ä½ äº§ç”Ÿâ€œå®¶â€çš„æ„Ÿè§‰çš„æ˜¯ï¼Ÿ",
        options: [
            { text: "å±äºè‡ªå·±çš„æˆ¿å­", scores: { house: 10 }, humor: "ä¸­å›½äººçš„æ‰§å¿µã€‚" },
            { text: "ä¸€ç¾¤å¿—åŒé“åˆçš„æœ‹å‹", scores: { friend: 10, youth: 5 }, humor: "å“ªé‡Œæœ‰æœ‹å‹å“ªé‡Œå°±æ˜¯å®¶ã€‚" },
            { text: "ä¾¿åˆ©çš„ç”Ÿæ´»å’Œèµšé’±æœºä¼š", scores: { money: 10 }, humor: "æé’±æ‰æ˜¯ç¡¬é“ç†ã€‚" }
        ]
    },
    {
        text: "Q23. [é€ƒç¦»å†²åŠ¨] é‡åˆ°ä»€ä¹ˆæƒ…å†µä½ ä¼šç«‹é©¬æƒ³é€ƒç¦»ä¸€åº§åŸï¼Ÿ",
        options: [
            { text: "é›¾éœ¾/ç©ºæ°”å·®", scores: { clean: 10, north: -5 }, humor: "æ·±å‘¼å¸ï¼Œç©ºæ°”è´¨é‡å¾ˆé‡è¦ã€‚" },
            { text: "æ²¡æœ‰ç¾é£Ÿ/ç¾é£Ÿè’æ¼ ", scores: { food: 10, hangzhou: -5 }, humor: "åƒä¸å¥½çœŸçš„ä¼šæŠ‘éƒã€‚" },
            { text: "æ²¡æœ‰å·¥ä½œæœºä¼š", scores: { career: 10 }, humor: "ç”Ÿå­˜ç¬¬ä¸€ã€‚" }
        ]
    },
    {
        text: "Q24. [å…»è€å¹»æƒ³] å¾ˆå¤šå¹´åï¼Œä½ å¸Œæœ›åœ¨å“ªé‡Œé€€ä¼‘ï¼Ÿ",
        options: [
            { text: "æ‹¥æœ‰é¡¶çº§åŒ»ç–—çš„å¤§åŸå¸‚", scores: { medical: 10, big: 5 }, humor: "ä¿å‘½è¦ç´§ã€‚" },
            { text: "é£æ™¯ä¼˜ç¾çš„æµ·è¾¹/å±±é‡Œ", scores: { nature: 10, quiet: 8 }, humor: "å›å½’è‡ªç„¶ã€‚" },
            { text: "å›è€å®¶/è½å¶å½’æ ¹", scores: { home: 10 }, humor: "ä¼ ç»Ÿã€‚" }
        ]
    },
    {
        text: "Q25. [æœ€åè¿™é¢˜] å¦‚æœç»™ä½ ä¸€å¼ å•ç¨‹æœºç¥¨ï¼Œä¸è€ƒè™‘é’±ï¼Œä½ æƒ³å»ï¼Ÿ",
        options: [
            { text: "æœ€ç¹åçš„åœ°æ–¹", scores: { modern: 10, fast: 5 }, humor: "é‡å¿ƒå‹ƒå‹ƒã€‚" },
            { text: "æœ€å®‰é€¸çš„åœ°æ–¹", scores: { slow: 10, chill: 5 }, humor: "äº«å—ç”Ÿæ´»ã€‚" },
            { text: "æœ€æœ‰æ–‡åŒ–çš„åœ°æ–¹", scores: { culture: 10 }, humor: "çµé­‚ä¹‹æ—…ã€‚" },
            { text: "æœ€å¥½åƒçš„åœ°æ–¹", scores: { food: 10 }, humor: "åƒè´§ä¸‡å²ã€‚" }
        ]
    }
];

// --- æ¸¸æˆé€»è¾‘ç±» ---

const game = {
    currentStep: 0,
    userScores: {}, // è®°å½•ç”¨æˆ·ç§¯ç´¯çš„æ ‡ç­¾åˆ†
    
    start: function() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'flex';
        this.renderQuestion();
    },

    renderQuestion: function() {
        const q = questions[this.currentStep];
        
        // æ›´æ–°è¿›åº¦UI
        document.getElementById('q-counter').innerText = `${this.currentStep + 1} / ${questions.length}`;
        const pct = ((this.currentStep) / questions.length) * 100;
        document.getElementById('progress-fill').style.width = `${pct}%`;
        
        // æ›´æ–°é¢˜ç›®
        document.getElementById('q-text').innerText = q.text;
        const optContainer = document.getElementById('q-options');
        optContainer.innerHTML = '';

        q.options.forEach((opt, index) => {
            const btn = document.createElement('div');
            btn.className = 'option-card';
            // æ·»åŠ é€‰é¡¹åºå· A. B. C.
            btn.innerHTML = `<span style="font-weight:bold; color:var(--primary); margin-right:10px;">${String.fromCharCode(65+index)}.</span> ${opt.text}`;
            btn.onclick = (e) => this.handleSelect(e, opt);
            optContainer.appendChild(btn);
        });
    },

    handleSelect: function(e, option) {
        // 1. ç‰¹æ•ˆ
        confetti({
            particleCount: 50,
            spread: 60,
            origin: { y: 0.7 },
            colors: ['#6366f1', '#a855f7', '#f43f5e']
        });

        // 2. è®¡åˆ†
        if(option.scores) {
            for (let [key, value] of Object.entries(option.scores)) {
                this.userScores[key] = (this.userScores[key] || 0) + value;
            }
        }

        // 3. å¹½é»˜æç¤º
        if(option.humor) {
            this.showToast(option.humor);
        }

        // 4. ä¸‹ä¸€é¢˜
        this.currentStep++;
        setTimeout(() => {
            if(this.currentStep < questions.length) {
                this.renderQuestion();
            } else {
                this.finish();
            }
        }, 1200);
    },

    showToast: function(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 2000);
    },

    finish: function() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        
        // æ¨¡æ‹Ÿè®¡ç®—å»¶è¿Ÿ
        setTimeout(() => {
            this.calculateAndShowResult();
        }, 2000);
    },

    calculateAndShowResult: function() {
        // ç®€å•çš„åŠ æƒåŒ¹é…ç®—æ³•
        const rankedCities = cities.map(city => {
            let score = 0;
            let hitTags = [];
            
            // éå†è¯¥åŸå¸‚çš„æ‰€æœ‰æ ‡ç­¾
            city.tags.forEach(tag => {
                // å¦‚æœç”¨æˆ·ä¹Ÿæœ‰è¿™ä¸ªæ ‡ç­¾çš„åˆ†æ•°ï¼ŒåŠ ä¸Šå»
                if(this.userScores[tag]) {
                    score += this.userScores[tag];
                    hitTags.push(tag);
                }
            });

            // åå‘æ‰£åˆ†é€»è¾‘ (Hard Constraints)
            // å¦‚æœç”¨æˆ·éå¸¸è®¨åŒæŸç§å±æ€§ï¼ˆè´Ÿåˆ†ï¼‰ï¼Œè€ŒåŸå¸‚æœ‰è¿™ä¸ªå±æ€§ï¼Œæƒ©ç½šåŠ å€
            for (let [uTag, uScore] of Object.entries(this.userScores)) {
                if(uScore < 0 && city.tags.includes(uTag)) {
                    score += uScore * 2; // æ¯”å¦‚ç”¨æˆ·dry=-10ï¼ŒåŸå¸‚æœ‰dryï¼Œåˆ™æ‰£20
                }
            }

            return { ...city, finalScore: score, hitTags };
        });

        // æ’åº
        rankedCities.sort((a, b) => b.finalScore - a.finalScore);

        const topCity = rankedCities[0];
        const secondCity = rankedCities[1];
        
        this.renderReport(topCity, secondCity);
        
        document.getElementById('loading-view').style.display = 'none';
        document.getElementById('report-view').style.display = 'block';
        confetti({ particleCount: 200, spread: 150, origin: { y: 0.6 } });
    },

    renderReport: function(top, second) {
        const dateStr = new Date().toLocaleDateString();
        
        // åŠ¨æ€ç”Ÿæˆåˆ†ææ–‡æ¡ˆ
        let personalityText = "å¹³è¡¡ä¸”åŠ¡å®";
        if(this.userScores['ambition'] > 8 || this.userScores['money'] > 8) personalityText = "å……æ»¡é‡å¿ƒä¸å¾æœæ¬²";
        else if(this.userScores['slow'] > 8 || this.userScores['nature'] > 8) personalityText = "è¿½æ±‚çµé­‚è‡ªç”±ä¸ç”Ÿæ´»è´¨æ„Ÿ";
        else if(this.userScores['family'] > 8) personalityText = "æ·±æƒ…çš„å®¶åº­å®ˆæŠ¤è€…";

        let budgetText = "";
        if(top.tags.includes("high_cost")) budgetText = "è™½ç„¶è¿™é‡Œç”Ÿæ´»æˆæœ¬æé«˜ï¼Œä½†å®ƒæä¾›çš„å¤©èŠ±æ¿ä¹Ÿæ˜¯æœ€é«˜çš„ï¼Œæ­£å¦‚ä½ æ¸´æœ›çš„é‚£æ ·ã€‚";
        else if(top.tags.includes("low_cost")) budgetText = "è¿™é‡Œçš„æˆ¿ä»·æå…¶å‹å¥½ï¼Œä½ å¯ä»¥è½»æ¾æ‹¥æœ‰è‡ªå·±çš„ç”Ÿæ´»ç©ºé—´ï¼Œå‘Šåˆ«æˆ¿è´·ç„¦è™‘ã€‚";
        else budgetText = "è¿™é‡Œçš„æ€§ä»·æ¯”é€‚ä¸­ï¼Œæ—¢æœ‰åŸå¸‚çš„ç¹åï¼Œåˆä¸è‡³äºè®©ä½ é€ä¸è¿‡æ°”ã€‚";

        const html = `
            <div style="text-align:center; border-bottom: 2px solid #e2e8f0; padding-bottom:20px; margin-bottom:20px;">
                <h2 style="color:var(--primary); margin:0; font-size:1.8rem;">ä½ çš„å‘½å®šä¹‹åŸï¼š${top.name}</h2>
                <div style="margin-top:10px;">
                    ${top.tags.slice(0,4).map(t => `<span class="city-badge">#${this.mapTagToText(t)}</span>`).join('')}
                </div>
            </div>

            <h3 style="color:var(--text);">1. æ·±åº¦è§£ææŠ¥å‘Š</h3>
            <p>äº²çˆ±çš„æµ‹è¯•è€…ï¼Œç»è¿‡ 25 ä¸ªç»´åº¦çš„äº¤å‰åˆ†æï¼Œç®—æ³•è®¤ä¸ºä½ çš„çµé­‚åº•è‰²æ˜¯ <strong>${personalityText}</strong>ã€‚</p>
            <p><strong>${top.name}</strong> æ˜¯æœ€èƒ½æ‰¿è½½ä½ å½“ä¸‹æœŸå¾…çš„åŸå¸‚ã€‚${top.desc}</p>
            <p>${budgetText} ä½ çš„æ€§æ ¼ç‰¹è´¨ä¸è¿™åº§åŸå¸‚çš„ <strong>${top.tags.includes('fast')?'å¿«èŠ‚å¥æ•ˆç‡':'æ…¢èŠ‚å¥çƒŸç«æ°”'}</strong> å½¢æˆäº†å®Œç¾çš„äº’è¡¥ã€‚</p>

            <h3 style="color:var(--text);">2. ä¸ºä»€ä¹ˆæ˜¯${top.name}ï¼Ÿ</h3>
            <p>åœ¨ä½ çš„æ½œæ„è¯†é‡Œï¼Œä½ æœ€çœ‹é‡çš„æ˜¯ <strong>${this.getTopUserTags()}</strong>ã€‚è€Œ ${top.name} æ°æ°åœ¨è¿™äº›ç»´åº¦å¾—åˆ†æœ€é«˜ã€‚</p>
            <p>ä¾‹å¦‚ï¼Œä½ å¯¹æ°”å€™å’Œé¥®é£Ÿçš„åå¥½ï¼Œè®©ç³»ç»Ÿæ’é™¤äº†é‚£äº›è®©ä½ ä¸é€‚çš„åŒºåŸŸï¼Œæœ€ç»ˆé”å®šäº†è¿™ä¸ªæ—¢èƒ½å®‰æ”¾è‚‰èº«ï¼Œåˆèƒ½å®‰æ”¾çµé­‚çš„åæ ‡ã€‚</p>

            <h3 style="color:var(--text);">3. å¤‡é€‰æ–¹æ¡ˆ (Plan B)</h3>
            <p>å¦‚æœ ${top.name} è®©ä½ è§‰å¾—è¿˜æœ‰äº›è®¸çŠ¹è±«ï¼Œé‚£ä¹ˆ <strong>${second.name}</strong> æ˜¯ä½ çš„ç¬¬äºŒé¡ºä½é€‰æ‹©ï¼ˆåŒ¹é…åº¦ä»…ä½ 2%ï¼‰ã€‚</p>
            <p>${second.desc}</p>

            <div style="background:#f8fafc; padding:15px; border-radius:10px; margin-top:30px; border:1px solid #e2e8f0;">
                <h4 style="margin-top:0;">ğŸ’¡ ä¸“å®¶å»ºè®®</h4>
                <p style="font-size:0.9rem; margin-bottom:0;">åŸå¸‚åªæ˜¯å®¹å™¨ï¼Œç”Ÿæ´»æ‰æ˜¯å†…å®¹ã€‚æ— è®ºæœ€ç»ˆé€‰æ‹©å“ªé‡Œï¼Œæ„¿ä½ éƒ½èƒ½åœ¨é‚£ä¸ªç»çº¬åº¦ä¸Šï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„å…‰ã€‚æœ¬æŠ¥å‘Šç”Ÿæˆäº ${dateStr}ï¼Œä»…ä¾›å¨±ä¹ä¸å†³ç­–å‚è€ƒã€‚</p>
            </div>
        `;
        
        document.getElementById('report-content').innerHTML = html;
    },

    mapTagToText: function(tag) {
        const map = {
            'high_cost': 'é«˜æˆæœ¬é«˜å›æŠ¥', 'low_cost': 'æ€§ä»·æ¯”ä¹‹ç‹', 'mid_cost': 'å¹³è¡¡å®‰é€¸',
            'north': 'åŒ—æ–¹è±ªçˆ½', 'south': 'å—æ–¹ç»†è…»', 'coastal': 'æµ·æ»¨ç”Ÿæ´»',
            'tech': 'ç§‘æŠ€å‰æ²¿', 'gov': 'ä½“åˆ¶ç¨³å®š', 'finance': 'é‡‘èä¸­å¿ƒ', 'mfg': 'å®ä¸šé‡é•‡',
            'food': 'ç¾é£Ÿé«˜åœ°', 'spicy': 'æ— è¾£ä¸æ¬¢', 'sweet': 'ç”œç¾ç”Ÿæ´»',
            'fast': 'å¿«èŠ‚å¥', 'slow': 'æ…¢ç”Ÿæ´»', 'nightlife': 'ä¸å¤œåŸ',
            'culture': 'æ–‡åŒ–åº•è•´', 'nature': 'å±±æ°´ä¹‹é—´', 'inclusive': 'æåº¦åŒ…å®¹'
        };
        return map[tag] || tag;
    },

    getTopUserTags: function() {
        // æ‰¾å‡ºç”¨æˆ·å¾—åˆ†æœ€é«˜çš„3ä¸ªæ ‡ç­¾
        return Object.entries(this.userScores)
            .sort((a,b) => b[1] - a[1])
            .slice(0,3)
            .map(entry => this.mapTagToText(entry[0]))
            .join('ã€');
    },

    exportPDF: function() {
        const element = document.getElementById('report-content');
        const opt = {
            margin:       15,
            filename:     `åŸå¸‚åŒ¹é…æŠ¥å‘Š_æ——èˆ°ç‰ˆ_${new Date().getTime()}.pdf`,
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { scale: 2 },
            jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save();
    }
};

// ç¿»è¯‘æ ‡ç­¾è¾…åŠ©å‡½æ•°ï¼Œé˜²æ­¢æ˜¾ç¤º undefined
</script>
</body>
</html>